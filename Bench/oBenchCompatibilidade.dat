
/*
	Testes Realizados:

•	Deve haver compatibilidade entre os tipos dos dois lados de um comando de atribuição, conforme a seguinte tabela:
								Tipo do lado esquerdo	Tipo do lado direito
								Inteiro	Inteiro ou Caractere
								Real	Inteiro, Real ou Caractere
								Caractere	Inteiro ou Caractere
								Lógico	Lógico

•	Os tipos dos resultados das diversas classes de expressões só podem ser os seguintes:
									Classe da expressão	Tipo
									Aritmética	Inteiro, Real ou Caractere
									Relacional	Lógico
									Lógica	Lógico

•	Os tipos dos operandos admitidos pelos operadores de expressões são os seguintes:
								Operadores	Tipos admitidos dos operandos
								||  &&  !	Lógico
								<  <=  >  >=  	Inteiro, Real ou Caractere
								=  !=	Todos (se um for lógico o outro também deve ser)
								+  -  *  /  ~	Inteiro, Real ou Caractere
								%	Inteiro ou Caractere

 */

globais:
	int varInteiro, exprI;
	real varReal, exprR;
	carac varCarac, exprC;
	logico varLogico, exprL;

funcoes:
vazio Inteiro () {
locais:
	int var;
comandos:
	var := varInteiro;
	var := varCarac;
	var := varReal;


***** Exception<Incompatibilidade>: Obtido: real. Esperado: int ou carac *****
	var := varLogico;


***** Exception<Incompatibilidade>: Obtido: logico. Esperado: int ou carac *****
}
vazio Real () {
locais:
	real var;
comandos:
	var := varInteiro;
	var := varCarac;
	var := varReal;
	var := varLogico;


***** Exception<Incompatibilidade>: Obtido: logico. Esperado: int ou carac ou real *****
}
vazio Carac () {
locais:
	carac var;
comandos:
	var := varInteiro;
	var := varCarac;
	var := varReal;


***** Exception<Incompatibilidade>: Obtido: real. Esperado: int ou carac *****
	var := varLogico;


***** Exception<Incompatibilidade>: Obtido: logico. Esperado: int ou carac *****
}
vazio Logico () {
locais:
	logico var;
comandos:
	var := varInteiro;


***** Exception<Incompatibilidade>: Obtido: int. Esperado: logico *****
	var := varCarac;


***** Exception<Incompatibilidade>: Obtido: carac. Esperado: logico *****
	var := varReal;


***** Exception<Incompatibilidade>: Obtido: real. Esperado: logico *****
	var := varLogico;
}
vazio ExprAritmetica () {
locais:
	int var;
comandos:
	exprI := (1 + 1);
	exprC := ('c'  - 'a' );
	exprR := (2 / 4);
	exprL := (true + true

***** Exception<Incompatibilidade>: Operando improprio para operador aritmetico *****
);


***** Exception<Incompatibilidade>: Obtido: int. Esperado: logico *****
}
vazio ExprRelacional () {
locais:
	int var;
comandos:
	exprI := (2 = 1);


***** Exception<Incompatibilidade>: Obtido: logico. Esperado: int ou carac *****
	exprC := (2 != 1);


***** Exception<Incompatibilidade>: Obtido: logico. Esperado: int ou carac *****
	exprR := (2 >= 1);


***** Exception<Incompatibilidade>: Obtido: logico. Esperado: int ou carac ou real *****
	exprL := (2 > 1);
}
vazio ExprLogica () {
locais:
	int var;
comandos:
	exprI := (true || false);


***** Exception<Incompatibilidade>: Obtido: logico. Esperado: int ou carac *****
	exprC := (true && true);


***** Exception<Incompatibilidade>: Obtido: logico. Esperado: int ou carac *****
	exprR := (!true);


***** Exception<Incompatibilidade>: Obtido: logico. Esperado: int ou carac ou real *****
	exprL := (!false);
}
vazio OpLogico () {
locais:
	int var;
comandos:
	varLogico := varLogico && varLogico;
	varLogico := varLogico || varLogico;
	varLogico := !varLogico;
	varLogico := varInteiro && varCarac

***** Exception<Incompatibilidade>: Operando improprio para AND *****
;
	varLogico := varInteiro || varCarac

***** Exception<Incompatibilidade>: Operando improprio para OR *****
;
	varLogico := !varInteiro

***** Exception<Incompatibilidade>: Operando improprio para NOT *****
;
}
vazio OpRelacional () {
locais:
	int var;
comandos:
	varLogico := varInteiro > varInteiro;
	varLogico := varReal >= varInteiro;
	varLogico := varInteiro < varCarac;
	varLogico := varLogico <= varCarac

***** Exception<Incompatibilidade>: Operando improprio para operador relacional *****
;
}
vazio OpIgualdade () {
locais:
	int var;
comandos:
	varLogico := varInteiro = varCarac;
	varLogico := varReal != varCarac;
	varLogico := varLogico = varLogico;
	varLogico := varLogico != varInteiro

***** Exception<Incompatibilidade>: Operando improprio para operador relacional *****
;
}
vazio OpAritmetico () {
locais:
	int var;
comandos:
	varInteiro := varInteiro + varCarac;
	varReal := varReal * varCarac;
	varInteiro := varLogico / varLogico

***** Exception<Incompatibilidade>: Operando improprio para operador aritmetico *****
;
	varInteiro := varLogico - varInteiro

***** Exception<Incompatibilidade>: Operando improprio para operador aritmetico *****
;
	varInteiro := ~varInteiro;
	varInteiro := varInteiro % varInteiro;
	varInteiro := varCarac % varCarac;
}
principal {
locais:
	int var;
comandos:
	;
}

var: Nao Inicializada
var: Nao Referenciada
var: Nao Inicializada
var: Nao Referenciada
var: Nao Inicializada
var: Nao Referenciada
var: Nao Inicializada
var: Nao Referenciada
var: Nao Inicializada
var: Nao Referenciada
var: Nao Inicializada
var: Nao Referenciada
var: Nao Inicializada
var: Nao Referenciada
var: Nao Inicializada
var: Nao Referenciada
varCarac: Nao Inicializada


	TABELA  DE  SIMBOLOS:

Classe 0:
  (exprR   , IDVAR, real  , 1, 1, escopo: Global);
Classe 1:
  (varInteiro, IDVAR, int   , 1, 1, escopo: Global);
Classe 4:
  (##1     , IDVAR, int   , 1, 1, escopo: ExprAritmetica);
  (varReal , IDVAR, real  , 1, 1, escopo: Global);
Classe 5:
  (##2     , IDVAR, int   , 1, 1, escopo: ExprAritmetica);
Classe 6:
  (OpIgualdade, IDFUNC, vazio , escopo: Global
	Variaveis: int var, logico ##23, logico ##24, logico ##25, logico ##26
	Parametros: NULL);
  (##10    , IDVAR, logico, 1, 1, escopo: ExprLogica);
  (##3     , IDVAR, real  , 1, 1, escopo: ExprAritmetica);
Classe 7:
  (var     , IDVAR, int   , 0, 0, escopo: Principal);
  (var     , IDVAR, int   , 0, 0, escopo: OpAritmetico);
  (var     , IDVAR, int   , 0, 0, escopo: OpIgualdade);
  (##20    , IDVAR, logico, 1, 1, escopo: OpRelacional);
  (var     , IDVAR, int   , 0, 0, escopo: OpRelacional);
  (var     , IDVAR, int   , 0, 0, escopo: OpLogico);
  (##11    , IDVAR, logico, 1, 1, escopo: ExprLogica);
  (var     , IDVAR, int   , 0, 0, escopo: ExprLogica);
  (var     , IDVAR, int   , 0, 0, escopo: ExprRelacional);
  (ExprRelacional, IDFUNC, vazio , escopo: Global
	Variaveis: int var, logico ##5, logico ##6, logico ##7, logico ##8
	Parametros: NULL);
  (##4     , IDVAR, int   , 1, 1, escopo: ExprAritmetica);
  (var     , IDVAR, int   , 0, 0, escopo: ExprAritmetica);
  (var     , IDVAR, logico, 1, 1, escopo: Logico);
  (Logico  , IDFUNC, vazio , escopo: Global
	Variaveis: logico var
	Parametros: NULL);
  (var     , IDVAR, carac , 1, 1, escopo: Carac);
  (var     , IDVAR, real  , 1, 1, escopo: Real);
  (var     , IDVAR, int   , 1, 1, escopo: Inteiro);
Classe 8:
  (##30    , IDVAR, int   , 1, 1, escopo: OpAritmetico);
  (##21    , IDVAR, logico, 1, 1, escopo: OpRelacional);
  (##12    , IDVAR, logico, 1, 1, escopo: ExprLogica);
  (##5     , IDVAR, logico, 1, 1, escopo: ExprRelacional);
  (exprC   , IDVAR, carac , 1, 1, escopo: Global);
Classe 9:
  (##31    , IDVAR, int   , 1, 1, escopo: OpAritmetico);
  (##22    , IDVAR, logico, 1, 1, escopo: OpRelacional);
  (##13    , IDVAR, logico, 1, 1, escopo: OpLogico);
  (##6     , IDVAR, logico, 1, 1, escopo: ExprRelacional);
Classe 10:
  (Principal, IDFUNC, vazio , escopo: Global
	Variaveis: int var
	Parametros: NULL);
  (##32    , IDVAR, int   , 1, 1, escopo: OpAritmetico);
  (##23    , IDVAR, logico, 1, 1, escopo: OpIgualdade);
  (##14    , IDVAR, logico, 1, 1, escopo: OpLogico);
  (##7     , IDVAR, logico, 1, 1, escopo: ExprRelacional);
Classe 11:
  (##33    , IDVAR, int   , 1, 1, escopo: OpAritmetico);
  (##24    , IDVAR, logico, 1, 1, escopo: OpIgualdade);
  (##15    , IDVAR, logico, 1, 1, escopo: OpLogico);
  (##8     , IDVAR, logico, 1, 1, escopo: ExprRelacional);
Classe 12:
  (##25    , IDVAR, logico, 1, 1, escopo: OpIgualdade);
  (##16    , IDVAR, logico, 1, 1, escopo: OpLogico);
  (##9     , IDVAR, logico, 1, 1, escopo: ExprLogica);
Classe 13:
  (OpAritmetico, IDFUNC, vazio , escopo: Global
	Variaveis: int var, int ##27, real ##28, int ##29, int ##30, int ##31, int ##32, int ##33
	Parametros: NULL);
  (##26    , IDVAR, logico, 1, 1, escopo: OpIgualdade);
  (OpRelacional, IDFUNC, vazio , escopo: Global
	Variaveis: int var, logico ##19, logico ##20, logico ##21, logico ##22
	Parametros: NULL);
  (##17    , IDVAR, logico, 1, 1, escopo: OpLogico);
Classe 14:
  (##27    , IDVAR, int   , 1, 1, escopo: OpAritmetico);
  (##18    , IDVAR, int   , 1, 1, escopo: OpLogico);
  (OpLogico, IDFUNC, vazio , escopo: Global
	Variaveis: int var, logico ##13, logico ##14, logico ##15, logico ##16, logico ##17, int ##18
	Parametros: NULL);
  (Carac   , IDFUNC, vazio , escopo: Global
	Variaveis: carac var
	Parametros: NULL);
  (varLogico, IDVAR, logico, 1, 1, escopo: Global);
  (exprI   , IDVAR, int   , 1, 1, escopo: Global);
Classe 15:
  (##28    , IDVAR, real  , 1, 1, escopo: OpAritmetico);
  (##19    , IDVAR, logico, 1, 1, escopo: OpRelacional);
Classe 16:
  (##29    , IDVAR, int   , 1, 1, escopo: OpAritmetico);
  (ExprAritmetica, IDFUNC, vazio , escopo: Global
	Variaveis: int var, int ##1, int ##2, real ##3, int ##4
	Parametros: NULL);
Classe 17:
  (ExprLogica, IDFUNC, vazio , escopo: Global
	Variaveis: int var, logico ##9, logico ##10, logico ##11, logico ##12
	Parametros: NULL);
  (Inteiro , IDFUNC, vazio , escopo: Global
	Variaveis: int var
	Parametros: NULL);
  (exprL   , IDVAR, logico, 1, 1, escopo: Global);
Classe 18:
  (Global  , IDGLOB, null  , escopo: NULL
	Variaveis: int varInteiro, int exprI, real varReal, real exprR, carac varCarac, carac exprC, logico varLogico, logico exprL
	Funcoes: vazio Inteiro, vazio Real, vazio Carac, vazio Logico, vazio ExprAritmetica, vazio ExprRelacional, vazio ExprLogica, vazio OpLogico, vazio OpRelacional, vazio OpIgualdade, vazio OpAritmetico, vazio Principal);
Classe 20:
  (Real    , IDFUNC, vazio , escopo: Global
	Variaveis: real var
	Parametros: NULL);
Classe 21:
  (varCarac, IDVAR, carac , 0, 1, escopo: Global);


	CODIGO INTEMEDIARIO:


Quadruplas do modulo Global:

	   1# OPENMOD, (MODULO, Global), (IDLE), (IDLE)
	   2# MAIS, (INT, 1), (INT, 1), (VAR, ##1)
	   3# MENOS, (CARAC, c), (CARAC, a), (VAR, ##2)
	   4# DIV, (REAL, 2), (REAL, 4), (VAR, ##3)
	   5# MAIS, (LOGIC, 1), (LOGIC, 1), (VAR, ##4)
	   6# EQ, (INT, 2), (INT, 1), (VAR, ##5)
	   7# NE, (INT, 2), (INT, 1), (VAR, ##6)
	   8# GE, (INT, 2), (INT, 1), (VAR, ##7)
	   9# GT, (INT, 2), (INT, 1), (VAR, ##8)
	  10# OR, (LOGIC, 1), (LOGIC, 0), (VAR, ##9)
	  11# AND, (LOGIC, 1), (LOGIC, 1), (VAR, ##10)
	  12# NOT, (LOGIC, 1), (IDLE), (VAR, ##11)
	  13# NOT, (LOGIC, 0), (IDLE), (VAR, ##12)
	  14# AND, (VAR, varLogico), (VAR, varLogico), (VAR, ##13)
	  15# OR, (VAR, varLogico), (VAR, varLogico), (VAR, ##14)
	  16# NOT, (VAR, varLogico), (IDLE), (VAR, ##15)
	  17# AND, (VAR, varInteiro), (VAR, varCarac), (VAR, ##16)
	  18# OR, (VAR, varInteiro), (VAR, varCarac), (VAR, ##17)
	  19# NOT, (VAR, varInteiro), (IDLE), (VAR, ##18)
	  20# GT, (VAR, varInteiro), (VAR, varInteiro), (VAR, ##19)
	  21# GE, (VAR, varReal), (VAR, varInteiro), (VAR, ##20)
	  22# LT, (VAR, varInteiro), (VAR, varCarac), (VAR, ##21)
	  23# LE, (VAR, varLogico), (VAR, varCarac), (VAR, ##22)
	  24# EQ, (VAR, varInteiro), (VAR, varCarac), (VAR, ##23)
	  25# NE, (VAR, varReal), (VAR, varCarac), (VAR, ##24)
	  26# EQ, (VAR, varLogico), (VAR, varLogico), (VAR, ##25)
	  27# NE, (VAR, varLogico), (VAR, varInteiro), (VAR, ##26)
	  28# MAIS, (VAR, varInteiro), (VAR, varCarac), (VAR, ##27)
	  29# MULT, (VAR, varReal), (VAR, varCarac), (VAR, ##28)
	  30# DIV, (VAR, varLogico), (VAR, varLogico), (VAR, ##29)
	  31# MENOS, (VAR, varLogico), (VAR, varInteiro), (VAR, ##30)
	  32# MENUN, (VAR, varInteiro), (IDLE), (VAR, ##31)
	  33# RESTO, (VAR, varInteiro), (VAR, varInteiro), (VAR, ##32)
	  34# RESTO, (VAR, varCarac), (VAR, varCarac), (VAR, ##33)
